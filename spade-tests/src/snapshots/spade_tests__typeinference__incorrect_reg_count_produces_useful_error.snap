---
source: spade-tests/src/typeinference.rs
---
pipeline(N) p<#int N>(clk: clock, x: bool) -> bool {
    reg * {N-2};
    reg;
        x
}

entity a(clk: clock) -> bool {
    inst(10) p(clk, false)
}


error: Pipeline depth mismatch. Expected 10 got 9
  ┌─ testinput:1:1
  │  
1 │ ╭ pipeline(N) p<#int N>(clk: clock, x: bool) -> bool {
2 │ │     reg * {N-2};
3 │ │     reg;
4 │ │         x
5 │ │ }
  │ ╰─^ Found 9 stages in this pipeline
  ·  
8 │       inst(10) p(clk, false)
  │            -- Type 10 inferred here
  │  
  = note: Expected: 9
               Got: 10
  = The error is in a generic unit instantiated at
    ╰ testinput:8 p<10>
