---
source: spade-tests/src/ast_lowering.rs
---
impl<#uint N> uint<N> {
    fn twice(self) -> uint<{N + 2}> {
        self + self
    }

    fn times<#uint M>(self, other: uint<M>) -> uint<{N + M + 1}> {
        self * other
    }
}

fn test() {
    let x = 5u8.twice();
    let y = 5u8.times(2u10);
}


error: Output type mismatch. Expected uint<10>, got Number<9>
  ┌─ testinput:2:37
  │  
2 │       fn twice(self) -> uint<{N + 2}> {
  │                         ------------- uint<10> type specified here
  │ ╭─────────────────────────────────────^
3 │ │         self + self
  │ │         ----------- Type 9 inferred here
4 │ │     }
  │ ╰─────^ Found type Number<9>
  │  
  = note: Expected: 10
                in: uint<10>
               Got: 9
                in: Number<9>
  = The error is in a generic unit instantiated at
    ╰ testinput:12 impl#14::twice<8>

error: Output type mismatch. Expected uint<19>, got Number<18>
  ┌─ testinput:6:66
  │  
6 │       fn times<#uint M>(self, other: uint<M>) -> uint<{N + M + 1}> {
  │                                                  ----------------- uint<19> type specified here
  │ ╭──────────────────────────────────────────────────────────────────^
7 │ │         self * other
  │ │         ------------ Type 18 inferred here
8 │ │     }
  │ ╰─────^ Found type Number<18>
  │  
  = note: Expected: 19
                in: uint<19>
               Got: 18
                in: Number<18>
  = The error is in a generic unit instantiated at
    ╰ testinput:13 impl#14::times<10, 8>
